-------------------fora_module-------------------


//input


-------------------blog_module-------------------



//input


-------------------Q&A_module-------------------

   CREATE SEQUENCE  "LYS"."SEQUENCE_QUESTION"  MINVALUE 1 MAXVALUE 999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE ;

  

  CREATE TABLE "LYS"."QUESTION" 
   (	"ID" NUMBER(12,0) NOT NULL ENABLE, 
	"TITLE" VARCHAR2(120 BYTE) NOT NULL ENABLE, 
	"DESCRIBE" VARCHAR2(2000 BYTE), 
	"CREATE_BY" NUMBER(10,0) NOT NULL ENABLE, 
	"CREATE_TIME" DATE NOT NULL ENABLE, 
	"UPDATE_BY" NUMBER(10,0), 
	"UPDATE_TIME" DATE, 
	"VIEWS" NUMBER(11,0) DEFAULT 0, 
	"ANSWERS" NUMBER(11,0) DEFAULT 0, 
	"STATUS" NUMBER(2,0) DEFAULT 10, 
	"TAGS" VARCHAR2(150 BYTE), 
	 CONSTRAINT "QUESTION_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
 

   COMMENT ON COLUMN "LYS"."QUESTION"."TITLE" IS '标题';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."DESCRIBE" IS '内容';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."CREATE_BY" IS '创建人';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."CREATE_TIME" IS '创建时间';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."UPDATE_BY" IS '更新人';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."UPDATE_TIME" IS '更新时间';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."VIEWS" IS '访问量';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."ANSWERS" IS '回答数量';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."STATUS" IS '问题状态';
 
   COMMENT ON COLUMN "LYS"."QUESTION"."TAGS" IS '标签';
 

  CREATE OR REPLACE TRIGGER "LYS"."TRIGGER_QUESTION" 
BEFORE INSERT ON QUESTION 
FOR EACH ROW 
 WHEN (new.id is null) BEGIN
  select sequence_question.nextval into :new.id from dual;
END;
/
ALTER TRIGGER "LYS"."TRIGGER_QUESTION" ENABLE;
 

  CREATE TABLE "LYS"."BBS_USER" 
   (	"ID" NUMBER(10,0) NOT NULL ENABLE, 
	"NICKNAME" VARCHAR2(20 BYTE), 
	"SEX" NUMBER(1,0), 
	"TELEPHONE" VARCHAR2(20 BYTE), 
	 CONSTRAINT "TABLE1_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;



   CREATE SEQUENCE  "LYS"."SEQUENCE_ANSWER"  MINVALUE 1 MAXVALUE 10000000000000 INCREMENT BY 1 START WITH 1 CACHE 20 ORDER  NOCYCLE ;
 

  CREATE TABLE "LYS"."ANSWER" 
   (	"ID" NUMBER(14,0) NOT NULL ENABLE, 
	"CONTENT" VARCHAR2(1000 BYTE) NOT NULL ENABLE, 
	"CREATE_BY" NUMBER(10,0) NOT NULL ENABLE, 
	"CREATE_TIME" DATE NOT NULL ENABLE, 
	"QUESTION_ID" NUMBER(12,0) NOT NULL ENABLE, 
	"HELPFUL" NUMBER(8,0) DEFAULT 0, 
	 CONSTRAINT "ANSWER_PK" PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "ANSWER_FK1" FOREIGN KEY ("QUESTION_ID")
	  REFERENCES "LYS"."QUESTION" ("ID") ON DELETE CASCADE ENABLE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
 

   COMMENT ON COLUMN "LYS"."ANSWER"."ID" IS '答案主键';
 
   COMMENT ON COLUMN "LYS"."ANSWER"."CONTENT" IS '内容';
 
   COMMENT ON COLUMN "LYS"."ANSWER"."CREATE_BY" IS '创建人';
 
   COMMENT ON COLUMN "LYS"."ANSWER"."CREATE_TIME" IS '创建时间';
 
   COMMENT ON COLUMN "LYS"."ANSWER"."QUESTION_ID" IS '问题外键';
 
   COMMENT ON COLUMN "LYS"."ANSWER"."HELPFUL" IS '用户意见';
 

  CREATE OR REPLACE TRIGGER "LYS"."TRIGGER_ASWER" 
BEFORE INSERT ON ANSWER 
FOR EACH ROW 
 WHEN (new.id is null) BEGIN
  select sequence_answer.nextval into :new.id from dual;
END;
/
ALTER TRIGGER "LYS"."TRIGGER_ASWER" ENABLE;

CREATE TABLE "LYS"."ANSWER_HELP" 
   (	"ANSWER_ID" NUMBER(14,0) NOT NULL ENABLE, 
	"USER_ID" NUMBER(10,0) NOT NULL ENABLE, 
	"CREATE_TIME" DATE NOT NULL ENABLE, 
	"IS_HELPFUL" NUMBER(2,0) NOT NULL ENABLE, 
	 CONSTRAINT "HELP_PK" PRIMARY KEY ("ANSWER_ID", "USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS"  ENABLE, 
	 CONSTRAINT "ANSWER_HELP_FK1" FOREIGN KEY ("ANSWER_ID")
	  REFERENCES "LYS"."ANSWER" ("ID") ON DELETE CASCADE ENABLE, 
	 CONSTRAINT "ANSWER_HELP_FK2" FOREIGN KEY ("USER_ID")
	  REFERENCES "LYS"."BBS_USER" ("ID") ON DELETE CASCADE ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;
 

   COMMENT ON COLUMN "LYS"."ANSWER_HELP"."ANSWER_ID" IS '答案外键';
 
   COMMENT ON COLUMN "LYS"."ANSWER_HELP"."USER_ID" IS '用户外键';
 
   COMMENT ON COLUMN "LYS"."ANSWER_HELP"."CREATE_TIME" IS '创建时间';
 
   COMMENT ON COLUMN "LYS"."ANSWER_HELP"."IS_HELPFUL" IS '是否有用';
 

 

 
